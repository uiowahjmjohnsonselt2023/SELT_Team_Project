<div style="display: flex; flex-direction: column; align-items: center;">
  <div style="text-align: center;">
    <!-- User profile header -->
    <img src="path_to_profile_photo.jpg" alt="User Profile Photo" style="width: 100px; height: 100px; border-radius: 50%;"> <!-- Placeholder for profile photo -->
    <h4><%= @user.name %></h4>
    <div id="userRating"></div> <!-- Dynamic star rating -->
    <p><%= pluralize(@user.reviews, 'Review') %></p> <!-- Dynamic reviews count -->
  </div>
  <div class="profile-divider"></div> <!-- This adds the styled divider using a class -->
  
  <% if @user.id == session[:user_id] %>
    <!-- Main container for user info, recent orders, and posted products -->
    <div style="display: flex; justify-content: space-around; width: 100%; padding: 20px 0;"> <!-- Added padding to the top and bottom -->
      <!-- User Info Section -->
      <div style="flex: 1; padding: 0 20px;"> <!-- Added padding to the sides -->
        <div class="user-info-wrapper">
          <h2>Profile</h2>
          <div class="user-info">
            <!-- User info details -->
            <h4><%= @user.name %></h4>
            <% if @address %>
              <% @address.each do |address| %>
                <p><%= address.street %>, <%= address.city %>, <%= address.state %>, <%= address.zip %>, <%= address.country %></p>
              <% end %>
            <% else %>
              <p>No address on file.</p>
            <% end %>
            <p>Email: <%= @user.email %></p>
            <% if @user.phone_number %>
              <p>Phone: <%= @user.phone_number %></p>
            <% else %>
              <p>No phone number on file.</p>
            <% end %>
            <h4><%= link_to "Edit user settings", {controller: "user", action: "edit", id: session[:user_id]}, method: :get %></h4>
          </div>
        </div>
      </div>

      <!-- Recent Orders Section -->
      <div class="recent-orders-container" style="flex: 1; padding: 0 20px;"> <!-- Added padding to the sides -->
        <h3>Recent Orders</h3>
        <% if @orders %>
          <% @orders.each do |order| %>
            <div class="recent-order-item">
              <%= render order %>
            </div>
          <% end %>
        <% else %>
          <p>No recent orders, buy something!</p>
        <% end %>
      </div>

      <!-- Posted Products Section -->
      <div class="posted-products-container" style="flex: 1; padding: 0 20px;"> <!-- Added padding to the sides -->
        <h3>Posted Products</h3>
        <% if @product %>
          <% @product.each do |product| %>
            <div class="posted-product-item">
              <h3><%= product.name %></h3>
              <p><%= product.description %></p>
              <p>Unit Price: <%= number_to_currency(product.price) %></p>
              <%= link_to "Edit Product", {controller: "products", action: "edit", id: product.id}, method: :get %>
            </div>
          <% end %>
        <% else %>
          <p>No posted products.</p>
        <% end %>
      </div>
    </div>
  <% end %>

  <script>
      document.addEventListener('DOMContentLoaded', function() {
          var userRating = <%= @user.rating %>; // get the rating from Rails
          document.getElementById('userRating').innerHTML = updateUserRating(userRating);
      });
  </script>

</div>
